(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cdf56ae"],{1276:function(t,e,a){"use strict";var i=a("d784"),s=a("44e7"),n=a("825a"),l=a("1d80"),o=a("4840"),r=a("8aa5"),d=a("50c4"),c=a("14c3"),f=a("9263"),u=a("d039"),p=[].push,x=Math.min,_=4294967295,g=!u((function(){return!RegExp(_,"y")}));i("split",2,(function(t,e,a){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var i=String(l(this)),n=void 0===a?_:a>>>0;if(0===n)return[];if(void 0===t)return[i];if(!s(t))return e.call(i,t,n);var o,r,d,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),x=0,g=new RegExp(t.source,u+"g");while(o=f.call(g,i)){if(r=g.lastIndex,r>x&&(c.push(i.slice(x,o.index)),o.length>1&&o.index<i.length&&p.apply(c,o.slice(1)),d=o[0].length,x=r,c.length>=n))break;g.lastIndex===o.index&&g.lastIndex++}return x===i.length?!d&&g.test("")||c.push(""):c.push(i.slice(x)),c.length>n?c.slice(0,n):c}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var s=l(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,s,a):i.call(String(s),e,a)},function(t,s){var l=a(i,t,this,s,i!==e);if(l.done)return l.value;var f=n(t),u=String(this),p=o(f,RegExp),b=f.unicode,v=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(g?"y":"g"),m=new p(g?f:"^(?:"+f.source+")",v),h=void 0===s?_:s>>>0;if(0===h)return[];if(0===u.length)return null===c(m,u)?[u]:[];var y=0,D=0,k=[];while(D<u.length){m.lastIndex=g?D:0;var C,w=c(m,g?u:u.slice(D));if(null===w||(C=x(d(m.lastIndex+(g?0:D)),u.length))===y)D=r(u,D,b);else{if(k.push(u.slice(y,D)),k.length===h)return k;for(var S=1;S<=w.length-1;S++)if(k.push(w[S]),k.length===h)return k;D=y=C}}return k.push(u.slice(y)),k}]}),!g)},"14c3":function(t,e,a){var i=a("c6b6"),s=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var n=a.call(t,e);if("object"!==typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return s.call(t,e)}},"159b":function(t,e,a){var i=a("da84"),s=a("fdbc"),n=a("17c2"),l=a("9112");for(var o in s){var r=i[o],d=r&&r.prototype;if(d&&d.forEach!==n)try{l(d,"forEach",n)}catch(c){d.forEach=n}}},"17c2":function(t,e,a){"use strict";var i=a("b727").forEach,s=a("a640"),n=a("ae40"),l=s("forEach"),o=n("forEach");t.exports=l&&o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,a){var i=a("d039"),s=a("b622"),n=a("2d00"),l=s("species");t.exports=function(t){return n>=51||!i((function(){var e=[],a=e.constructor={};return a[l]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},4160:function(t,e,a){"use strict";var i=a("23e7"),s=a("17c2");i({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},"44e7":function(t,e,a){var i=a("861d"),s=a("c6b6"),n=a("b622"),l=n("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[l])?!!e:"RegExp"==s(t))}},"8aa5":function(t,e,a){"use strict";var i=a("6547").charAt;t.exports=function(t,e,a){return e+(a?i(t,e).length:1)}},9263:function(t,e,a){"use strict";var i=a("ad6d"),s=a("9f7f"),n=RegExp.prototype.exec,l=String.prototype.replace,o=n,r=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),d=s.UNSUPPORTED_Y||s.BROKEN_CARET,c=void 0!==/()??/.exec("")[1],f=r||c||d;f&&(o=function(t){var e,a,s,o,f=this,u=d&&f.sticky,p=i.call(f),x=f.source,_=0,g=t;return u&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),g=String(t).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==t[f.lastIndex-1])&&(x="(?: "+x+")",g=" "+g,_++),a=new RegExp("^(?:"+x+")",p)),c&&(a=new RegExp("^"+x+"$(?!\\s)",p)),r&&(e=f.lastIndex),s=n.call(u?a:f,g),u?s?(s.input=s.input.slice(_),s[0]=s[0].slice(_),s.index=f.lastIndex,f.lastIndex+=s[0].length):f.lastIndex=0:r&&s&&(f.lastIndex=f.global?s.index+s[0].length:e),c&&s&&s.length>1&&l.call(s[0],a,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(s[o]=void 0)})),s}),t.exports=o},"9f7f":function(t,e,a){"use strict";var i=a("d039");function s(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=s("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=s("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a434:function(t,e,a){"use strict";var i=a("23e7"),s=a("23cb"),n=a("a691"),l=a("50c4"),o=a("7b0b"),r=a("65f0"),d=a("8418"),c=a("1dde"),f=a("ae40"),u=c("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),x=Math.max,_=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u||!p},{splice:function(t,e){var a,i,c,f,u,p,v=o(this),m=l(v.length),h=s(t,m),y=arguments.length;if(0===y?a=i=0:1===y?(a=0,i=m-h):(a=y-2,i=_(x(n(e),0),m-h)),m+a-i>g)throw TypeError(b);for(c=r(v,i),f=0;f<i;f++)u=h+f,u in v&&d(c,f,v[u]);if(c.length=i,a<i){for(f=h;f<m-i;f++)u=f+i,p=f+a,u in v?v[p]=v[u]:delete v[p];for(f=m;f>m-i+a;f--)delete v[f-1]}else if(a>i)for(f=m-i;f>h;f--)u=f+i-1,p=f+a-1,u in v?v[p]=v[u]:delete v[p];for(f=0;f<a;f++)v[f+h]=arguments[f+2];return v.length=m-i+a,c}})},ac1f:function(t,e,a){"use strict";var i=a("23e7"),s=a("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},b64b:function(t,e,a){var i=a("23e7"),s=a("7b0b"),n=a("df75"),l=a("d039"),o=l((function(){n(1)}));i({target:"Object",stat:!0,forced:o},{keys:function(t){return n(s(t))}})},c740:function(t,e,a){"use strict";var i=a("23e7"),s=a("b727").findIndex,n=a("44d2"),l=a("ae40"),o="findIndex",r=!0,d=l(o);o in[]&&Array(1)[o]((function(){r=!1})),i({target:"Array",proto:!0,forced:r||!d},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(o)},c975:function(t,e,a){"use strict";var i=a("23e7"),s=a("4d64").indexOf,n=a("a640"),l=a("ae40"),o=[].indexOf,r=!!o&&1/[1].indexOf(1,-0)<0,d=n("indexOf"),c=l("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:r||!d||!c},{indexOf:function(t){return r?o.apply(this,arguments)||0:s(this,t,arguments.length>1?arguments[1]:void 0)}})},d4c3:function(t,e,a){var i=a("fd25");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("84040bb6",i,!0,{sourceMap:!1,shadowMode:!1})},d784:function(t,e,a){"use strict";a("ac1f");var i=a("6eeb"),s=a("d039"),n=a("b622"),l=a("9263"),o=a("9112"),r=n("species"),d=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c=function(){return"$0"==="a".replace(/./,"$0")}(),f=n("replace"),u=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),p=!s((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,f){var x=n(t),_=!s((function(){var e={};return e[x]=function(){return 7},7!=""[t](e)})),g=_&&!s((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[r]=function(){return a},a.flags="",a[x]=/./[x]),a.exec=function(){return e=!0,null},a[x](""),!e}));if(!_||!g||"replace"===t&&(!d||!c||u)||"split"===t&&!p){var b=/./[x],v=a(x,""[t],(function(t,e,a,i,s){return e.exec===l?_&&!s?{done:!0,value:b.call(e,a,i)}:{done:!0,value:t.call(a,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:u}),m=v[0],h=v[1];i(String.prototype,t,m),i(RegExp.prototype,x,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)})}f&&o(RegExp.prototype[x],"sham",!0)}},d8e5:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting_details"},[a("div",{staticClass:"header"},[a("div",{staticClass:"back_btn",on:{click:t.closeTab}},[a("i",{staticClass:"el-icon-arrow-left"}),t._v("返回 ")])]),a("div",{staticClass:"basic_info"},[a("div",{staticClass:"info_content"},[t._m(0),a("div",{staticClass:"content_box"},[a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("PNR")]),a("p",{staticClass:"content"},[t._v(" "+t._s(t.detailsData.Pnr?t.detailsData.Pnr.PnrCode:"")+" ")])]),a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("所属部门")]),a("p",{staticClass:"content"},[t._v(t._s(t.detailsData.CreateDepartment||""))])])]),a("div",{staticClass:"content_box"},[a("div",{staticClass:"info_content_list order_list"},[a("p",{staticClass:"title"},[t._v("票号")]),a("el-popover",{staticClass:"hover_content",attrs:{placement:"bottom",trigger:"hover"}},[t._l(t.orderId,(function(e){return a("p",{key:e},[t._v(t._s(e))])})),a("p",{staticClass:"content",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(String(this.orderId)))])],2)],1),a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("复核者")]),a("p",{staticClass:"content"},[t._v(t._s(t.detailsData.AuditorName))])])]),a("div",{staticClass:"content_box"},[a("div",{staticClass:"info_content_list order_list"},[a("p",{staticClass:"title"},[t._v("退票单号")]),a("el-popover",{staticClass:"hover_content",attrs:{placement:"bottom",trigger:"hover"}},[t._l(t.refundOrderId,(function(e){return a("p",{key:e},[t._v(t._s(e))])})),a("p",{staticClass:"content",attrs:{slot:"reference"},slot:"reference"},[t._v(" "+t._s(String(this.refundOrderId))+" ")])],2)],1),a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("申请人")]),a("p",{staticClass:"content"},[t._v(t._s(t.detailsData.CreatorName))])])])]),a("div",{staticClass:"arr_content"},[a("div",{staticClass:"info_air_box"},t._l("false"===t.detailsStatus.IsDomestic?t.voyageList:t.tableDetr,(function(e,i){return a("div",{key:i,staticClass:"info_air"},[a("div",{staticClass:"info_content_list info_title"},[t._v("航程信息")]),a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("航空公司")]),a("p",{staticClass:"content"},[t._v(t._s(e.Airline||""))])]),a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("起飞机场")]),a("p",{staticClass:"content"},[t._v(t._s(e.DepAirport||""))])]),a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("起飞时间")]),a("p",{staticClass:"content"},[t._v(" "+t._s(t.$moment(new Date(e.DepTime)).format("YYYY-MM-DD HH:mm:ss")||"")+" ")])]),a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("航班号")]),a("p",{staticClass:"content"},[t._v(" "+t._s(t.$moment(new Date(e.FlightNo)).format("YYYY-MM-DD HH:mm:ss")||"")+" ")])]),a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("舱位")]),a("p",{staticClass:"content"},[t._v(t._s(e.Cabin||""))])]),a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("到达机场")]),a("p",{staticClass:"content"},[t._v(t._s(e.ArrAirport||""))])]),a("div",{staticClass:"info_content_list"},[a("p",{staticClass:"title"},[t._v("到达时间")]),a("p",{staticClass:"content"},[t._v(" "+t._s(t.$moment(new Date(e.ArrTime)).format("YYYY-MM-DD HH:mm:ss")||"")+" ")])])])})),0)])]),a("el-tabs",{staticClass:"setting_tab",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"退票信息",name:"info"}},[a("div",{staticClass:"setting_content"},[t.isTableAlive?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("ex-table-column",{attrs:{width:"80",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:"待确认"!==t.orderStatus&&"退票失败"!==t.orderStatus,size:"mini",type:"primary"},on:{click:function(a){return t.editDetails(e.$index,t.tableDetr[e.$index])}}},[t._v("编辑")])]}}],null,!1,241603361)}),a("ex-table-column",{attrs:{autoFit:!0,prop:"date",label:"采购渠道",width:"180"}},[t._l(t.detailsData.BuyOrders,(function(e,i){return a("span",{key:i},[t._v(t._s(e.BuyChannel.Name))])}))],2),a("ex-table-column",{attrs:{autoFit:!0,prop:"Name",label:"乘机人",width:"180"}}),a("ex-table-column",{attrs:{autoFit:!0,label:"票号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.$getTicketNumber(e.row.PassengerVoyages)))]}}],null,!1,2722254355)}),a("ex-table-column",{attrs:{autoFit:!0,width:"220",label:"航程信息"},scopedSlots:t._u([{key:"default",fn:function(e){return["false"===t.detailsStatus.IsDomestic?a("div",t._l(t.tableDetr[e.$index].Data.TripInfos,(function(e,i){return a("div",{key:i},[t._v(" "+t._s(e.TripNo+". "+e.ToAirport+"-"+e.FromAirport+" "+e.TicketNoStatus)+" ")])})),0):a("div",t._l(t.tableDetr,(function(e,i){return a("div",{key:i},[t._v(" "+t._s(i+1+". "+e.ArrAirport+"-"+e.DepAirport+" "+e.FlightNo)+" ")])})),0)]}}],null,!1,3752263492)}),a("ex-table-column",{attrs:{autoFit:!0,label:"票价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 票面价： "),"false"===t.detailsStatus.IsDomestic?a("span",[t._v(t._s((t.tableDetr[e.$index].CostInfo.Price||0)+"（"+t.tableDetr[e.$index].CostInfo.Currency+"）"))]):a("span",[t._v(t._s(e.row.BuyTicketPrice))])]}}],null,!1,4243383365)}),a("ex-table-column",{attrs:{autoFit:!0,width:"200",label:"税金"},scopedSlots:t._u([{key:"default",fn:function(e){return["false"===t.detailsStatus.IsDomestic?a("div",{staticClass:"taxs_main",on:{click:function(a){return t.openEditTaxs(e.$index,t.tableDetr[e.$index].Taxs)}}},[a("div",[t._v(" 应退总税金："+t._s(t.$Tax(t.tableDetr[e.$index].Taxs||0)+"（"+t.tableDetr[e.$index].CostInfo.Currency||NaN)+" ")]),a("p",[t._v("税金明细：")]),t._l(Object.keys(t.tableDetr[e.$index].Taxs||0),(function(i,s){return a("div",{key:s,staticClass:"taxs_box"},[t._v(" "+t._s(i||"")+"："+t._s(t.tableDetr[e.$index].Taxs[i]?t.tableDetr[e.$index].Taxs[i]:"")+" ")])}))],2):a("div",{staticClass:"taxs_main"},[a("div",[t._v("机建："+t._s(e.row.BuyAirRax||0))]),a("div",[t._v("燃油："+t._s(e.row.BuyTicketTax))])])]}}],null,!1,1309424764)}),a("ex-table-column",{attrs:{autoFit:!0,label:"其他费用"},scopedSlots:t._u([{key:"default",fn:function(e){return["false"===t.detailsStatus.IsDomestic?a("div",[t._v(" 已使用票价："+t._s(t.tableDetr[e.$index].UsedFare)+" ")]):a("div",{staticClass:"edit_buy_refundFee",on:{click:function(a){return t.editBuyRefundFee(e.$index,e.row)}}},[t._v(" 退票费："+t._s(e.row.BuyRefundFee)+" ")])]}}],null,!1,2658803324)}),a("ex-table-column",{attrs:{autoFit:!0,label:"代理费"},scopedSlots:t._u([{key:"default",fn:function(e){return["false"===t.detailsStatus.IsDomestic?a("div",[t._v(" "+t._s((t.tableDetr[e.$index].CostInfo.Price||0)+"（票面价）* "+t.$Agency(t.tableDetr[e.$index].CostInfo.AgencyFee)+"（代理费率）= "+(Number(t.tableDetr[e.$index].CostInfo.Price||0)*t.$Agency(t.tableDetr[e.$index].CostInfo.AgencyFee)).toFixed(1)+"（"+t.tableDetr[e.$index].CostInfo.Currency+"）")+" ")]):t._e()]}}],null,!1,748836769)}),a("ex-table-column",{attrs:{autoFit:!0,label:"应退金额"},scopedSlots:t._u([{key:"default",fn:function(e){return["false"===t.detailsStatus.IsDomestic?a("div",[t._v(" "+t._s(((Number(t.tableDetr[e.$index].CostInfo.Price)||0)+Number(t.$Tax(t.tableDetr[e.$index].Taxs))-Number(t.tableDetr[e.$index].UsedFare)-Number(t.tableDetr[e.$index].CostInfo.Price||0)*t.$Agency(t.tableDetr[e.$index].CostInfo.AgencyFee)).toFixed(1)+"（"+t.tableDetr[e.$index].CostInfo.Currency+"）")+" ")]):a("div",[t._v(" "+t._s(Number(e.row.BuyTicketPrice)+Number(e.row.BuyAirRax||0)+Number(e.row.BuyTicketTax)+Number(e.row.BuyRefundFee))+" ")])]}}],null,!1,2390485999)}),a("ex-table-column",{attrs:{autoFit:!0,label:"实退金额"}})],1):t._e()],1),t.detailsData.Contact?a("div",{staticClass:"setting_contact"},[a("div",{staticClass:"contact_title"},[t._v("联系人信息")]),a("div",{staticClass:"contact_main"},[a("div",{staticClass:"main_list"},[a("div",{staticClass:"list_title"},[t._v("联系人：")]),a("div",{staticClass:"list_message"},[t._v(" "+t._s(t.detailsData.Contact.Name||"")+" ")])]),a("div",{staticClass:"main_list"},[a("div",{staticClass:"list_title"},[t._v("联系手机：")]),a("div",{staticClass:"list_message"},[t._v(" "+t._s(t.detailsData.Contact.Phone||"")+" ")])]),a("div",{staticClass:"main_list"},[a("div",{staticClass:"list_title"},[t._v("联系电话：")]),a("div",{staticClass:"list_message"},[t._v(" "+t._s(t.detailsData.Contact.Tel||"")+" ")])]),a("div",{staticClass:"main_list"},[a("div",{staticClass:"list_title"},[t._v("邮箱：")]),a("div",{staticClass:"list_message"},[t._v(" "+t._s(t.detailsData.Contact.Email||"")+" ")])])])]):t._e()]),a("el-tab-pane",{attrs:{label:"退票日志",name:"msg"}},[a("div",{staticClass:"setting_message"},[a("div",{staticClass:"message_title"},[a("div",[t._v("时间")]),a("div",[t._v("状态")]),a("div",[t._v("信息")])]),t._l(t.refundMessage,(function(e,i){return a("div",{key:i,staticClass:"message_list"},[a("div",{staticClass:"list_time"},[t._v(" "+t._s(t.$moment(e.time).format("YYYY-MM-DD HH:mm:ss")||"")+" ")]),a("div",{staticClass:"list_type"},[t._v(t._s(e.status))]),a("div",{staticClass:"list_info"},t._l(e.message,(function(e){return a("p",{key:e},[t._v(" "+t._s(e)+" ")])})),0)])}))],2)])],1),a("div",{staticClass:"setting_bottom"},[a("el-button",{attrs:{disabled:"待确认"!==t.orderStatus&&"退票失败"!==t.orderStatus,type:"primary"},on:{click:t.submitBtn}},[t._v("再次提交")]),a("el-button",{staticClass:"table_setting_ico",attrs:{disabled:"退票成功"===t.orderStatus,type:"primary"},on:{click:function(e){return t.updateBtn()}}},[t._v("更新")])],1),a("el-dialog",{attrs:{title:"详情修改","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:t.taxsDialog,"custom-class":"taxs_dialog",width:"30%"},on:{"update:visible":function(e){t.taxsDialog=e}}},[a("div",{staticClass:"dialog_title"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("税金明细修改")]),a("el-button",{staticClass:"add_taxs",attrs:{size:"mini",type:"primary"},on:{click:t.addTaxs}},[t._v("增加")])],1),a("div",{staticClass:"taxs_content"},[a("div",{staticClass:"taxs_main"},t._l(t.taxsEditData,(function(e,i){return a("div",{key:i,staticClass:"taxs_list"},[a("span",{staticStyle:{width:"20px"}},[t._v(t._s(i+1)+".")]),a("el-input",{model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"item.key"}}),a("el-input",{model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),a("div",{staticClass:"remove_taxs",on:{click:function(e){return t.removeTaxs(i)}}},[a("i",{staticClass:"el-icon-close"})])],1)})),0)]),a("el-divider",{attrs:{"content-position":"left"}},[t._v("其他明细")]),t.taxsDialog?a("div",{staticClass:"taxs_content other_content",staticStyle:{display:"flex","align-items":"center","padding-left":"20px"}},[a("el-input",{attrs:{placeholder:"票价",disabled:""}}),a("el-input",{attrs:{placeholder:""},model:{value:t.editDetailsData.CostInfo.Price,callback:function(e){t.$set(t.editDetailsData.CostInfo,"Price",e)},expression:"editDetailsData.CostInfo.Price"}}),a("span",{staticStyle:{"flex-shrink":"0",width:"45px","text-align":"center"}},[t._v(t._s(t.editDetailsData.CostInfo.Currency))])],1):t._e(),t.taxsDialog?a("div",{staticClass:"taxs_content other_content",staticStyle:{display:"flex","align-items":"center","padding-right":"45px","padding-left":"20px"}},[a("el-input",{attrs:{placeholder:"已使用票价",disabled:""}}),a("el-input",{attrs:{placeholder:"已使用票价"},model:{value:t.editDetailsData.UsedFare,callback:function(e){t.$set(t.editDetailsData,"UsedFare",e)},expression:"editDetailsData.UsedFare"}})],1):t._e(),t.taxsDialog?a("div",{staticClass:"taxs_content other_content",staticStyle:{display:"flex","align-items":"center","padding-right":"45px","padding-left":"20px"}},[a("el-input",{attrs:{disabled:"",placeholder:"代理费率"}}),a("el-input",{attrs:{placeholder:"代理费率"},model:{value:t.editDetailsData.CostInfo.AgencyFee,callback:function(e){t.$set(t.editDetailsData.CostInfo,"AgencyFee",e)},expression:"editDetailsData.CostInfo.AgencyFee"}})],1):t._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.taxsDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveSubmitEaxs}},[t._v("保 存")])],1)],1),a("el-dialog",{attrs:{title:"退票费修改","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:t.buyFeeDialog,"custom-class":"buy_fee_dialog",width:"30%"},on:{"update:visible":function(e){t.buyFeeDialog=e}}},[a("div",{staticClass:"buy_fee_dialog_main"},[a("div",[t._v("退票费")]),a("el-input",{attrs:{placeholder:"退票费"},model:{value:t.newBuyFeeData,callback:function(e){t.newBuyFeeData=e},expression:"newBuyFeeData"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.buyFeeDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveSubmitBuyFee}},[t._v("保 存")])],1)]),a("el-dialog",{attrs:{"custom-class":"update_setting",title:"更新退票状态","modal-append-to-body":!1,"close-on-click-modal":!1,visible:t.updateSettingDialog,width:"800px"},on:{"update:visible":function(e){t.updateSettingDialog=e}}},[a("div",{staticClass:"update_setting_main"},t._l(t.updateSettingData.TicketNos,(function(e,i){return a("el-form",{key:i,ref:"form",refInFor:!0,attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"退票票号"}},[t._v(t._s(e))]),a("el-form-item",{attrs:{label:"退票单号"}},[a("el-input",{attrs:{clearable:""},model:{value:t.updateSetting[i].platformRefundId,callback:function(e){t.$set(t.updateSetting[i],"platformRefundId",e)},expression:"updateSetting[index].platformRefundId"}})],1),a("el-form-item",{attrs:{label:"退票状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择退票状态"},model:{value:t.updateSetting[i].status,callback:function(e){t.$set(t.updateSetting[i],"status",e)},expression:"updateSetting[index].status"}},[a("el-option",{attrs:{label:"退票成功",value:"0"}}),a("el-option",{attrs:{label:"退票失败",value:"1"}}),a("el-option",{attrs:{label:"渠道不支持",value:"2"}}),a("el-option",{attrs:{label:"已拒单",value:"4"}})],1)],1),a("el-form-item",{attrs:{label:"退票信息"}},[a("el-input",{attrs:{clearable:""},model:{value:t.updateSetting[i].message,callback:function(e){t.$set(t.updateSetting[i],"message",e)},expression:"updateSetting[index].message"}})],1),a("el-form-item",{attrs:{label:"备注信息"}},[a("el-input",{attrs:{clearable:""},model:{value:t.updateSetting[i].remark,callback:function(e){t.$set(t.updateSetting[i],"remark",e)},expression:"updateSetting[index].remark"}})],1)],1)})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"提交者"}},[a("el-input",{staticClass:"update_setting_user",attrs:{placeholder:"请输入提交者",clearable:""},model:{value:t.updateSettingUser,callback:function(e){t.updateSettingUser=e},expression:"updateSettingUser"}})],1)],1),a("div",{staticClass:"footer_btn_box"},[a("el-button",{on:{click:function(e){t.updateSettingDialog=!1}}},[t._v("关 闭")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitUpdate()}}},[t._v("确 定")])],1)],1)])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info_content_list info_title"},[a("p",{staticClass:"title notAfter"},[t._v("基本信息")])])}],n=(a("c740"),a("4160"),a("c975"),a("a434"),a("a9e3"),a("b64b"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("2909")),l={name:"settingDetails",data:function(){return{orderStatus:"",detailsStatus:{},activeName:"info",isTableAlive:!0,detailsData:{},tableData:[],tableDetr:[],copyTableDetr:[],taxsDialog:!1,taxsType:"",taxsEditData:[],editDetailsData:{},voyageList:[],editBuyFeeData:{},buyFeeDialog:!1,newBuyFeeData:"",oldUploadData:{},updateSettingDialog:!1,updateSetting:[],updateSettingUser:"",updateSettingData:{},newSettingData:{},refundMessage:[],refundOrderId:[],orderId:[]}},methods:{getDetailsData:function(){var t,e=this,a={id:Number(this.detailsStatus.id)},i=[];this.$axios.post("/refund/query",a).then((function(a){if(a.data.data.forEach((function(a,i){0===i&&(e.oldUploadData=a,t=a)})),e.orderStatus=t.RefundStatus,e.detailsData=JSON.parse(t.OriginalData),e.detailsData.BuyOrders.forEach((function(t,a){0===a&&(e.tableData=t.Passengers)})),e.oldUploadData.PlatformOrderNo){var s=e.oldUploadData.PlatformOrderNo.split(";");s.forEach((function(t){e.orderId.push(t.split(":")[0]),e.refundOrderId.push(t.split(":")[1])})),e.orderId=Object(n["a"])(new Set(e.orderId)),e.refundOrderId=Object(n["a"])(new Set(e.refundOrderId))}else if(!e.oldUploadData.PlatformOrderNo&&e.oldUploadData.TicketNos){var l=e.oldUploadData.TicketNos.split(";");l.forEach((function(t){e.orderId.push(t.split(",")[0])}))}e.tableData.forEach((function(t){t.RefundCenterDETR=t.RefundCenterDETR?JSON.parse(t.RefundCenterDETR):"",t.PassengerVoyages.forEach((function(t){i.push(t.VoyageId)}))}));var o=[],r=e.oldUploadData.RefundMsg,d=[];o=r.split("@@"),o.length>0&&o.forEach((function(t,e){if(t.indexOf("!")){var a=[];t.split("^")[1]&&t.split("^")[1].indexOf("&")&&t.split("^")[1].split("&").forEach((function(t){a.push(t)})),d[e]={time:t.split("!")[0]||"",status:t.split("!")[1].split("^")[0]||"",message:a}}})),e.refundMessage=d,"false"===e.detailsStatus.IsDomestic?(e.detailsData.Voyages.forEach((function(t){i.forEach((function(a){t.Id===a&&e.voyageList.push(t)})),e.voyageList=Object(n["a"])(new Set(e.voyageList))})),e.detailsData.BuyOrders.forEach((function(t,a){0===a&&t.Passengers.forEach((function(t){t.RefundCenterDETR.webInput?e.tableDetr.push(JSON.parse(t.RefundCenterDETR.webInput)):t.RefundCenterDETR.blackScreen?e.tableDetr.push(JSON.parse(t.RefundCenterDETR.blackScreen)):e.tableDetr.push(t.RefundCenterDETR)}))})),e.tableDetr.forEach((function(t){null===t.CostInfo&&(t.CostInfo={Price:0,Currency:"",AgencyFee:0})}))):e.tableDetr=e.detailsData.Voyages}))},getSettingMsg:function(){},reload:function(){var t=this;this.isTableAlive=!1,this.$nextTick((function(){return t.isTableAlive=!0}))},editBuyRefundFee:function(t,e){"待确认"!==this.orderStatus&&"退票失败"!==this.orderStatus||(this.editBuyFeeData={index:t,data:e},this.buyFeeDialog=!0,this.newBuyFeeData=JSON.parse(JSON.stringify(e.BuyRefundFee)))},saveSubmitBuyFee:function(){this.detailsData.BuyOrders[0].Passengers[this.editBuyFeeData.index].BuyRefundFee=this.newBuyFeeData,this.buyFeeDialog=!1,this.reload()},editDetails:function(t,e){var a=this;this.editDetailsData=JSON.parse(JSON.stringify(e)),this.taxsEditData=[],this.taxsDialog=!0,this.taxsType=t,Object.keys(e.Taxs).forEach((function(t){a.taxsEditData.push({key:t,value:e.Taxs[t]})}))},openEditTaxs:function(t,e){},saveSubmitEaxs:function(){var t={};this.taxsEditData.forEach((function(e,a){t[e.key]=Number(e.value)})),this.editDetailsData.CostInfo.Price=Number(this.editDetailsData.CostInfo.Price),this.editDetailsData.UsedFare=Number(this.editDetailsData.UsedFare),this.editDetailsData.CostInfo.AgencyFee=Number(this.editDetailsData.CostInfo.AgencyFee),this.tableDetr[this.taxsType]=this.editDetailsData,this.tableDetr[this.taxsType].Taxs=t,this.editDetailsData.Taxs=t,this.tableData[this.taxsType].RefundCenterDETR["blackScreen"]=JSON.parse(this.tableData[this.taxsType].RefundCenterDETR["blackScreen"]),this.tableData[this.taxsType].RefundCenterDETR["webInput"]=this.editDetailsData,this.reload(),this.taxsDialog=!1},removeTaxs:function(t){this.taxsEditData.splice(t,1)},addTaxs:function(){this.taxsEditData.push({key:"",value:""})},submitBtn:function(){var t=this;this.detailsData.BuyOrders[0]["Submitter"]=this.$TimeSetting(new Date,"yyyyMMddHHmmss")+":web^再次提交";var e=JSON.parse(JSON.stringify(this.detailsData));e.BuyOrders[0].Passengers.forEach((function(t){t.RefundCenterDETR=JSON.stringify(t.RefundCenterDETR)})),this.$axios.post("/refund/resubmit",e).then((function(e){0===e.data.code?(localStorage.setItem("saveSubmit","update"),t.$message.success(e.data.message)):t.$message.warning(e.data.message)}))},updateBtn:function(){var t=this;this.updateSetting=[],this.updateSettingUser="",this.updateSettingData={};var e=JSON.parse(JSON.stringify(this.oldUploadData));e.TicketNos=[];try{this.oldUploadData.TicketNos.split(";").forEach((function(t){e.TicketNos.push(t.split(",").shift())}))}catch(a){try{e.TicketNos=this.oldUploadData.TicketNos.split(",").shift()}catch(a){}}e.TicketNos.forEach((function(e,a){t.updateSetting.push({ticketNo:"",remark:"",status:"",message:""})})),this.updateSettingData=e,this.updateSettingDialog=!0},submitUpdate:function(){var t=this,e=this.detailsData.BuyOrders,a=this.updateSetting.findIndex((function(t){return"0"!==t.status})),i=JSON.parse(JSON.stringify(this.updateSetting));i.forEach((function(e,a){e.ticketNo=t.updateSettingData.TicketNos[a],e.status=Number(e.status)}));var s={executorName:"前端提交-"+this.updateSettingUser,refundBuyPassenger:[{buyOrderId:e[0].Id,passengerId:e[0].Passengers[0].Id,tickNoAction:i}],status:-1===a?0:1,yatpRefundId:String(JSON.parse(this.updateSettingData.OriginalData).Id)};this.$axios.post("/refund/update",s).then((function(e){0===e.data.code?(t.updateSettingDialog=!1,t.$message.success(e.data.message),t.dataList=[],t.getDetailsData()):t.$message.warning(e.data.message)}))},closeTab:function(){window.opener=null,window.open("about:blank","_top").close()}},mounted:function(){this.detailsStatus=this.$route.query,this.getDetailsData()}},o=l,r=(a("f8cf"),a("2877")),d=Object(r["a"])(o,i,s,!1,null,"92df776e",null);e["default"]=d.exports},f8cf:function(t,e,a){"use strict";var i=a("d4c3"),s=a.n(i);s.a},fd25:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'.el-button.is-disabled[data-v-92df776e]{opacity:.3}.setting_details[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100vh;background:#f2f2f2}.setting_details .header[data-v-92df776e]{height:60px;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:16px;background:#0070e2}.setting_details .header[data-v-92df776e],.setting_details .header .back_btn[data-v-92df776e]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 20px}.setting_details .header .back_btn[data-v-92df776e]{cursor:pointer;color:#fff;height:100%;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.setting_details .header .back_btn i[data-v-92df776e]{margin-right:10px}.setting_details .basic_info[data-v-92df776e]{padding:0 20px;margin-top:10px}.setting_details .basic_info .info_content[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #dedede;background:#fff}.setting_details .basic_info .info_content .info_content_list[data-v-92df776e]:not(.info_title){min-width:200px}.setting_details .basic_info .content_box[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.setting_details .basic_info .info_content_list[data-v-92df776e]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;padding:0 15px;-ms-flex-negative:0;flex-shrink:0;margin-left:-1px;margin-top:-1px;height:30px}.setting_details .basic_info .info_content_list.order_list .hover_content[data-v-92df776e]{display:block}.setting_details .basic_info .info_content_list.order_list .content[data-v-92df776e]{width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.setting_details .basic_info .info_content_list.info_title[data-v-92df776e]{background:#d8d6d6;width:100px;padding:0;height:60px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.setting_details .basic_info .info_content_list .title[data-v-92df776e]{font-weight:400}.setting_details .basic_info .info_content_list .title[data-v-92df776e]:not(.notAfter):after{content:"："}.setting_details .basic_info .info_content_list .content[data-v-92df776e]{font-size:14px}.setting_details .basic_info .arr_content[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #dedede;margin-top:15px;background:#fff}.setting_details .basic_info .arr_content .info_air_box[data-v-92df776e]{border-left:1px solid #dedede;width:100%}.setting_details .basic_info .arr_content .info_air_box .info_air[data-v-92df776e]{height:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:-1px;border-bottom:1px solid #dedede}.setting_details .basic_info .arr_content .info_air_box .info_air .info_title[data-v-92df776e]{height:50px}.setting_details .setting_tab[data-v-92df776e]{padding:20px}.setting_details .setting_tab .setting_message[data-v-92df776e]{border:1px solid #ebeef5}.setting_details .setting_tab .setting_message .message_title[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #ebeef5;font-size:14px}.setting_details .setting_tab .setting_message .message_title>div[data-v-92df776e]{width:20%;padding:0 10px;height:40px;line-height:40px;font-weight:700;background:#e1e8ef}.setting_details .setting_tab .setting_message .message_title>div[data-v-92df776e]:last-child{-webkit-box-flex:1;-ms-flex:1;flex:1;border-right-color:transparent}.setting_details .setting_tab .setting_message .message_list[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #ebeef5;margin-bottom:-1px;min-height:40px}.setting_details .setting_tab .setting_message .message_list>div[data-v-92df776e]{padding:5px 10px;width:20%;height:100%}.setting_details .setting_tab .setting_message .message_list>div[data-v-92df776e]:last-child{-webkit-box-flex:1;-ms-flex:1;flex:1;border-right-color:transparent}.setting_details .setting_content .details_header[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.setting_details .setting_content .details_header .header_list[data-v-92df776e]{min-width:15%;margin-bottom:15px}.setting_details .setting_content .details_header .header_list[data-v-92df776e]:not(:last-child){margin-right:15px}.setting_details .setting_content .edit_buy_refundFee[data-v-92df776e]:hover{cursor:pointer;text-decoration:underline}.setting_details .setting_contact[data-v-92df776e]{border:1px solid #ebeef5;display:-webkit-box;display:-ms-flexbox;display:flex;margin-top:10px;height:50px;background:#fff}.setting_details .setting_contact .contact_title[data-v-92df776e]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-right:1px solid #ebeef5;font-size:14px;width:100px;background:#d8d6d6}.setting_details .setting_contact .contact_main[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;padding:0 20px}.setting_details .setting_contact .contact_main .main_list[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.setting_details .setting_contact .contact_main .main_list .list_title[data-v-92df776e]{font-size:14px}.setting_details .setting_contact .contact_main .main_list[data-v-92df776e]:not(:last-child){margin-right:10%}.setting_details .setting_bottom[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:auto;padding-bottom:20px}.setting_details[data-v-92df776e] .taxs_dialog .el-dialog__body{padding-top:unset}.setting_details[data-v-92df776e] .taxs_dialog .dialog_title{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.setting_details[data-v-92df776e] .taxs_dialog .dialog_title .add_taxs{margin-left:10px}.setting_details[data-v-92df776e] .taxs_dialog .taxs_content.other_content:not(:last-child){margin-bottom:10px}.setting_details[data-v-92df776e] .taxs_dialog .taxs_content .taxs_main .taxs_list{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.setting_details[data-v-92df776e] .taxs_dialog .taxs_content .taxs_main .taxs_list:not(:last-child){margin-bottom:10px}.setting_details[data-v-92df776e] .taxs_dialog .taxs_content .taxs_main .taxs_list span{margin-right:10px}.setting_details[data-v-92df776e] .taxs_dialog .taxs_content .taxs_main .taxs_list .remove_taxs{font-size:16px;cursor:pointer;width:35px;margin-left:10px;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.setting_details[data-v-92df776e] .taxs_dialog .taxs_content .taxs_main .taxs_list .remove_taxs:hover{color:#0070e2}.setting_details[data-v-92df776e] .taxs_dialog .dialog-footer{text-align:center}.buy_fee_dialog_main[data-v-92df776e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.buy_fee_dialog_main div[data-v-92df776e]{-ms-flex-negative:0;flex-shrink:0;margin-right:30px}.buy_fee_dialog_main .el-input[data-v-92df776e]{-webkit-box-flex:1;-ms-flex:1;flex:1}[data-v-92df776e] .update_setting .el-dialog__body{padding-bottom:unset}[data-v-92df776e] .update_setting .update_setting_main{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;overflow-x:auto}[data-v-92df776e] .update_setting .update_setting_main .el-form{-webkit-box-flex:1;-ms-flex:1;flex:1;min-width:350px}[data-v-92df776e] .update_setting .update_setting_main .el-form:not(:last-child){border-right:1px dashed #dedede;padding-right:10px}[data-v-92df776e] .update_setting .dialog-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}[data-v-92df776e] .update_setting .dialog-footer .update_setting_user{width:200px}[data-v-92df776e] .update_setting .dialog-footer .footer_btn_box{display:-webkit-box;display:-ms-flexbox;display:flex}',""]),t.exports=e}}]);