(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6405c992"],{"0a13":function(e,t,r){var n=r("4859");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("499e").default;i("7c7b9eec",n,!0,{sourceMap:!1,shadowMode:!1})},"222d":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"setting_table"},[r("el-button",{staticClass:"config_add_btn",attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openSettingDialog("add")}}},[e._v("新增")]),r("div",{staticClass:"setting_list"},[r("div",{staticClass:"list_title",on:{click:function(t){e.orderTableShow=!e.orderTableShow}}},[e._v("国际")]),e.orderTableShow?r("el-table",{ref:"settingTable",staticStyle:{width:"100%"},attrs:{data:e.dataList,"row-key":"ID","tree-props":{children:"children",hasChildren:"hasChildren"},stripe:"",border:"","highlight-current-row":""},on:{"row-dblclick":e.dbClickOpenData}},[r("el-table-column",{attrs:{width:"200","show-overflow-tooltip":"",prop:"project",label:"渠道类型"}}),r("el-table-column",{attrs:{label:"渠道名称",width:"300","show-overflow-tooltip":"",prop:"channel_name"}}),r("el-table-column",{attrs:{label:"是否可用",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return["menu"!==t.row.type?r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.changeSetting(t.row.is_using,t.row)}},model:{value:t.row.is_using,callback:function(r){e.$set(t.row,"is_using",r)},expression:"scope.row.is_using"}}):e._e()]}}],null,!1,1914370398)}),r("el-table-column",{attrs:{label:"退票渠道",width:"80","show-overflow-tooltip":"",prop:"refund_channel"}}),r("el-table-column",{attrs:{align:"center",width:"100","show-overflow-tooltip":"",prop:"request_way",label:"请求方式"}}),r("el-table-column",{attrs:{align:"left","show-overflow-tooltip":"",prop:"url",label:"请求路径"}}),r("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",prop:"exchange_name",label:"交换机名"}}),r("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",width:"200",prop:"author",label:"作者"}}),r("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return"menu"!==t.row.type?[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.openSettingDialog("edit",t.row)}}},[e._v("编辑")]),r("el-button",{staticClass:"delete_btn",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return e.deleteList(t.row)}}},[e._v("删除")])]:void 0}}],null,!0)})],1):e._e()],1),r("div",{staticClass:"setting_list"},[r("div",{staticClass:"list_title",on:{click:function(t){e.interOrderTableShow=!e.interOrderTableShow}}},[e._v("国内")]),e.interOrderTableShow?r("el-table",{ref:"settingTable",staticStyle:{width:"100%"},attrs:{data:e.interDataList,"row-key":"ID","tree-props":{children:"children",hasChildren:"hasChildren"},stripe:"",border:"","highlight-current-row":""},on:{"row-dblclick":e.dbClickOpenData}},[r("el-table-column",{attrs:{width:"200","show-overflow-tooltip":"",prop:"project",label:"渠道类型"}}),r("el-table-column",{attrs:{label:"渠道名称",width:"300","show-overflow-tooltip":"",prop:"channel_name"}}),r("el-table-column",{attrs:{label:"是否可用",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return["menu"!==t.row.type?r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.changeSetting(t.row.is_using,t.row)}},model:{value:t.row.is_using,callback:function(r){e.$set(t.row,"is_using",r)},expression:"scope.row.is_using"}}):e._e()]}}],null,!1,1914370398)}),r("el-table-column",{attrs:{label:"退票渠道",width:"80","show-overflow-tooltip":"",prop:"refund_channel"}}),r("el-table-column",{attrs:{align:"center",width:"100","show-overflow-tooltip":"",prop:"request_way",label:"请求方式"}}),r("el-table-column",{attrs:{align:"left","show-overflow-tooltip":"",prop:"url",label:"请求路径"}}),r("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",prop:"exchange_name",label:"交换机名"}}),r("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",width:"200",prop:"author",label:"作者"}}),r("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return"menu"!==t.row.type?[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.openSettingDialog("edit",t.row)}}},[e._v("编辑")]),r("el-button",{staticClass:"delete_btn",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(r){return e.deleteList(t.row)}}},[e._v("删除")])]:void 0}}],null,!0)})],1):e._e()],1),r("el-dialog",{attrs:{"append-to-body":!0,"custom-class":"setting_dialog",title:"add"===e.settingType?"新增配置":"编辑配置",visible:e.settingDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"500px"},on:{"update:visible":function(t){e.settingDialog=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"国际国内",prop:"IsIntl"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择国内国际"},model:{value:e.ruleForm.IsIntl,callback:function(t){e.$set(e.ruleForm,"IsIntl",t)},expression:"ruleForm.IsIntl"}},[r("el-option",{attrs:{label:"国内",value:"no"}}),r("el-option",{attrs:{label:"国际",value:"yes"}})],1)],1),r("el-form-item",{attrs:{label:"渠道类型",prop:"project"}},[r("el-input",{model:{value:e.ruleForm.project,callback:function(t){e.$set(e.ruleForm,"project",t)},expression:"ruleForm.project"}})],1),r("el-form-item",{attrs:{label:"渠道名称",prop:"channel_name"}},[r("el-input",{model:{value:e.ruleForm.channel_name,callback:function(t){e.$set(e.ruleForm,"channel_name",t)},expression:"ruleForm.channel_name"}})],1),r("el-form-item",{attrs:{label:"退票渠道",prop:"channel_name"}},[r("el-input",{model:{value:e.ruleForm.refund_channel,callback:function(t){e.$set(e.ruleForm,"refund_channel",t)},expression:"ruleForm.refund_channel"}})],1),r("el-form-item",{attrs:{label:"请求方式",prop:"request_way"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择请求方式"},on:{change:function(t){return e.editRequestType(e.ruleForm.request_way)}},model:{value:e.ruleForm.request_way,callback:function(t){e.$set(e.ruleForm,"request_way",t)},expression:"ruleForm.request_way"}},[r("el-option",{attrs:{label:"mq",value:"mq"}}),r("el-option",{attrs:{label:"http",value:"http"}})],1)],1),r("el-form-item",{attrs:{label:"请求路径",prop:"url"}},[r("el-input",{model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url",t)},expression:"ruleForm.url"}})],1),r("el-form-item",{attrs:{label:"交换机名",prop:"exchange_name"}},[r("el-input",{model:{value:e.ruleForm.exchange_name,callback:function(t){e.$set(e.ruleForm,"exchange_name",t)},expression:"ruleForm.exchange_name"}})],1),r("el-form-item",{attrs:{label:"作者",prop:"author"}},[r("el-input",{model:{value:e.ruleForm.author,callback:function(t){e.$set(e.ruleForm,"author",t)},expression:"ruleForm.author"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closedDialog("ruleForm")}}},[e._v("关闭")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)],1),r("el-dialog",{attrs:{width:"300px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:e.warningDialog,title:"警告"},on:{"update:visible":function(t){e.warningDialog=t}}},[r("div",[e._v("正在关闭当前航线，是否确定")]),r("div",{staticClass:"footer-dialog",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.closeConfig(!1)}}},[e._v("取 消")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.closeConfig(!0)}}},[e._v("确 定")])],1)])],1)},i=[],l=(r("4160"),r("d81d"),r("a434"),r("159b"),r("521e")),o={name:"configFile",directives:{"el-table-infinite-scroll":l["a"]},data:function(){return{dataList:[],interDataList:[],projectDataList:[],settingDialog:!1,settingType:"",orderTableShow:!1,interOrderTableShow:!1,ruleForm:{IsIntl:"",project:"",channel_name:"",request_way:"",exchange_name:"",url:""},rules:{IsIntl:[{required:!0,message:"请选择国内国际",trigger:"blur"}],project:[{required:!0,message:"请填写渠道类型",trigger:"blur"}],channel_name:[{required:!0,message:"请填写渠道名称",trigger:"blur"}],refund_channel:[{required:!0,message:"请填写退票渠道",trigger:"blur"}],request_way:[{required:!0,message:"请选择请求方式",trigger:"change"}],url:[{required:!0,message:"请填写请求路径",trigger:"blur"}],exchange_name:[{required:!0,message:"请填写交换机名",trigger:"blur"}],author:[{required:!0,message:"请填写作者名称",trigger:"blur"}]},limit:20,loadStatus:!1,tableOpenName:"",clickTableName:["占位符"],checkedStatus:{},warningDialog:!1}},methods:{dbClickOpenData:function(e,t,r){var n=this;this.clickTableName.forEach((function(t,r){t===e.ID?(n.$refs.settingTable.toggleRowExpansion(e,!1),n.clickTableName.splice(r)):(n.$refs.settingTable.toggleRowExpansion(e,!0),n.clickTableName.push(e.ID))}))},editRequestType:function(e){this.rules.exchange_name.map((function(t){return t.required="mq"===e}))},openSettingDialog:function(e,t){this.settingType=e,this.settingDialog=!0,this.ruleForm=t?JSON.parse(JSON.stringify(t)):{}},closedDialog:function(e){this.settingDialog=!1,this.ruleForm={},this.$refs[e].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var r="add"===t.settingType?"/config/set":"edit"===t.settingType?"/config/update":"";t.ruleForm["is_using"]=t.ruleForm["is_using"]?"yes":"no",t.$axios.post(r,t.ruleForm).then((function(e){0===e.data.code?(t.$message.success("保存成功"),t.getDataList(),t.closedDialog()):t.$message.warning(e.data.message)}))}}))},deleteList:function(e){var t=this;this.$confirm(" 删除此条配置，该渠道将不能退票， 请慎重删除！","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){t.$axios.post("/config/del",e).then((function(e){0===e.data.code&&(t.$message.success(e.data.message),t.getDataList())}))})).catch((function(){}))},getDataList:function(){var e=this,t={project:""};this.$axios.post("/config/get",t).then((function(t){if(0===t.data.code){var r=t.data.data;if(r.length>0){var n=[],i=[];r.forEach((function(e,t){if("yes"===e.IsIntl){e.is_using="yes"===e.is_using;for(var r=0;r<n.length;r++)if(n[r].project===e.project)return void n[r].children.push(e);n.push({project:e.project,ID:e.project+t,type:"menu",children:[e]})}else if("no"===e.IsIntl){e.is_using="yes"===e.is_using;for(var l=0;l<i.length;l++)if(i[l].project===e.project)return void i[l].children.push(e);i.push({project:e.project,ID:e.project+t,type:"menu",children:[e]})}})),n.forEach((function(e){e.project=e.project+" ("+e.children.length+")"})),i.forEach((function(e){e.project=e.project+" ("+e.children.length+")"})),e.dataList=n,e.interDataList=i}}else e.$message.warning(t.data.message)}))},changeSetting:function(e,t){this.checkedStatus={configName:"refundInterface",isUsing:e?"yes":"no",itemID:t.ID},e?this.closeConfig(!0):this.warningDialog=!0},closeConfig:function(e){var t=this;e?this.$axios.post("/config/use",this.checkedStatus).then((function(e){0===e.data.code?t.$message.success(e.data.message):(t.$message.warning(e.data.message),t.getDataList())})):this.getDataList(),this.warningDialog=!1}},created:function(){this.getDataList()}},a=o,s=(r("dc72"),r("2877")),c=Object(s["a"])(a,n,i,!1,null,"e4db6868",null);t["default"]=c.exports},4859:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".setting_table[data-v-e4db6868]{position:relative}.setting_table .setting_list[data-v-e4db6868]:not(:last-child){margin-bottom:20px}.setting_table .setting_list .list_title[data-v-e4db6868]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#e5e9f2;border-radius:2px;padding:5px 10px;margin-bottom:5px;cursor:pointer}.setting_table .config_add_btn[data-v-e4db6868]{position:absolute;right:0;top:-50px}.setting_table .delete_btn[data-v-e4db6868]{background:#fff;border:2px solid #0070e2;-webkit-transition:all .3s;transition:all .3s;color:#0070e2}.setting_table .delete_btn[data-v-e4db6868]:hover{color:#fff;background:#0070e2}",""]),e.exports=t},"65f0":function(e,t,r){var n=r("861d"),i=r("e8b5"),l=r("b622"),o=l("species");e.exports=function(e,t){var r;return i(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?n(r)&&(r=r[o],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},8418:function(e,t,r){"use strict";var n=r("c04e"),i=r("9bf2"),l=r("5c6c");e.exports=function(e,t,r){var o=n(t);o in e?i.f(e,o,l(0,r)):e[o]=r}},a434:function(e,t,r){"use strict";var n=r("23e7"),i=r("23cb"),l=r("a691"),o=r("50c4"),a=r("7b0b"),s=r("65f0"),c=r("8418"),u=r("1dde"),d=r("ae40"),p=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,h=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var r,n,u,d,p,f,w=a(this),v=o(w.length),_=i(e,v),y=arguments.length;if(0===y?r=n=0:1===y?(r=0,n=v-_):(r=y-2,n=h(g(l(t),0),v-_)),v+r-n>m)throw TypeError(b);for(u=s(w,n),d=0;d<n;d++)p=_+d,p in w&&c(u,d,w[p]);if(u.length=n,r<n){for(d=_;d<v-n;d++)p=d+n,f=d+r,p in w?w[f]=w[p]:delete w[f];for(d=v;d>v-n+r;d--)delete w[d-1]}else if(r>n)for(d=v-n;d>_;d--)p=d+n-1,f=d+r-1,p in w?w[f]=w[p]:delete w[f];for(d=0;d<r;d++)w[d+_]=arguments[d+2];return w.length=v-n+r,u}})},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},ae40:function(e,t,r){var n=r("83ab"),i=r("d039"),l=r("5135"),o=Object.defineProperty,a={},s=function(e){throw e};e.exports=function(e,t){if(l(a,e))return a[e];t||(t={});var r=[][e],c=!!l(t,"ACCESSORS")&&t.ACCESSORS,u=l(t,0)?t[0]:s,d=l(t,1)?t[1]:void 0;return a[e]=!!r&&!i((function(){if(c&&!n)return!0;var e={length:-1};c?o(e,1,{enumerable:!0,get:s}):e[1]=1,r.call(e,u,d)}))}},b727:function(e,t,r){var n=r("0366"),i=r("44ad"),l=r("7b0b"),o=r("50c4"),a=r("65f0"),s=[].push,c=function(e){var t=1==e,r=2==e,c=3==e,u=4==e,d=6==e,p=5==e||d;return function(f,g,h,m){for(var b,w,v=l(f),_=i(v),y=n(g,h,3),x=o(_.length),S=0,k=m||a,D=t?k(f,x):r?k(f,0):void 0;x>S;S++)if((p||S in _)&&(b=_[S],w=y(b,S,v),e))if(t)D[S]=w;else if(w)switch(e){case 3:return!0;case 5:return b;case 6:return S;case 2:s.call(D,b)}else if(u)return!1;return d?-1:c||u?u:D}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},d81d:function(e,t,r){"use strict";var n=r("23e7"),i=r("b727").map,l=r("1dde"),o=r("ae40"),a=l("map"),s=o("map");n({target:"Array",proto:!0,forced:!a||!s},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},dc72:function(e,t,r){"use strict";var n=r("0a13"),i=r.n(n);i.a},e8b5:function(e,t,r){var n=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);